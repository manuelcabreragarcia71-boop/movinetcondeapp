<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOVINETCONDE - Kiosco V4</title>
    <style>
        /* --- ESTILOS GENERALES --- */
        :root {
            --primary: #FF7900; /* Naranja Orange/Movinet */
            --secondary: #FFD700; /* Dorado */
            --bg: #000000; 
            --card-bg: #111;
            --text: #ffffff;
            --accent: #25d366; /* WhatsApp */
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            padding-bottom: 80px;
        }

        /* --- CABECERA --- */
        header {
            background: linear-gradient(90deg, #000 0%, #1a1a1a 100%);
            padding: 20px;
            text-align: center;
            border-bottom: 3px solid var(--primary);
        }

        .logo-text {
            font-size: 2rem;
            font-weight: 900;
            color: white;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        .logo-text span { color: var(--primary); }

        /* --- NAVEGACI√ìN --- */
        nav {
            display: flex;
            justify-content: center;
            background: #151515;
            padding: 10px;
            gap: 10px;
            position: sticky;
            top: 0;
            z-index: 100;
            overflow-x: auto;
            white-space: nowrap;
        }

        nav button {
            background: transparent;
            border: 1px solid #444;
            color: #aaa;
            padding: 8px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: 0.3s;
            font-weight: 600;
        }

        nav button.active, nav button:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            box-shadow: 0 0 10px rgba(255, 121, 0, 0.4);
        }

        /* --- ESTRUCTURA --- */
        main { padding: 20px; max-width: 1000px; margin: 0 auto; }
        .section { display: none; animation: fadeIn 0.5s ease-out; }
        .section.active { display: block; }
        @keyframes fadeIn { from { opacity:0; transform:translateY(10px); } to { opacity:1; transform:translateY(0); } }

        /* --- TARJETAS --- */
        .card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid #333;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }

        h2 { border-left: 5px solid var(--primary); padding-left: 15px; color: white; margin-top: 0; }
        h3 { color: var(--primary); margin-top: 0; margin-bottom: 15px; }

        input, select {
            width: 100%;
            padding: 12px;
            background: #222;
            border: 1px solid #444;
            color: white;
            border-radius: 8px;
            margin-bottom: 15px;
            box-sizing: border-box; 
            font-size: 1rem;
        }

        input:focus { border-color: var(--primary); outline: none; }

        .btn-action {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, var(--primary), #ff9e42);
            border: none;
            color: white;
            font-weight: bold;
            font-size: 1.1rem;
            border-radius: 8px;
            cursor: pointer;
            text-transform: uppercase;
            box-shadow: 0 4px 10px rgba(255, 121, 0, 0.3);
        }

        /* --- OFERTAS PACKS --- */
        .pack-result {
            border: 1px solid #333;
            background: linear-gradient(135deg, #1a1a1a 0%, #000 100%);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }

        .pack-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .company-name { font-size: 1.5rem; font-weight: 800; color: white; text-transform: uppercase; }
        
        .pack-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        .feature-badge {
            background: #222;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.9rem;
            color: #ddd;
            border-left: 3px solid var(--primary);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .tv-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 5px;
        }

        .tv-tag {
            background: #333;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: bold;
            border: 1px solid #555;
        }
        
        .pack-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 1px solid #333;
            padding-top: 15px;
            margin-top: 10px;
        }

        .price-big { font-size: 2.2rem; font-weight: bold; color: var(--primary); }
        .price-sub { font-size: 0.9rem; color: #888; }
        
        .btn-whatsapp {
            background: var(--accent);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 30px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1rem;
        }

        /* --- CHECKBOXES PERSONALIZADOS PARA ADMIN --- */
        .checkbox-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #222;
            padding: 8px;
            border-radius: 5px;
        }
        .checkbox-item input { width: auto; margin: 0; }
        .checkbox-item label { margin: 0; color: white; font-size: 0.9rem; cursor: pointer;}

        /* --- M√ìVILES GRID --- */
        .movil-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 15px;
        }

        .movil-card {
            background: #151515;
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid #333;
            text-align: center;
            transition: transform 0.2s;
        }
        .movil-card:hover { transform: scale(1.02); border-color: var(--primary); }

        .movil-img-container {
            width: 100%;
            height: 180px;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            box-sizing: border-box;
        }

        .movil-img-container img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .movil-info { padding: 15px; }
        .movil-price { color: var(--primary); font-size: 1.4rem; font-weight: bold; margin: 5px 0; }

        /* --- MODALES --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); z-index: 200; display: none;
            justify-content: center; align-items: center;
        }
        
        .modal-content {
            background: #1a1a1a; padding: 25px; border-radius: 15px; width: 90%; max-width: 400px; border: 1px solid var(--primary); text-align: center;
        }

        /* --- LISTAS ADMIN --- */
        .admin-list-item { 
            display: flex; justify-content: space-between; align-items: center;
            padding: 10px; background: #222; margin-top: 5px; font-size: 0.9rem; border-radius: 5px;
        }
        .btn-delete { color: #ff4444; background: none; border: none; font-size: 1.2rem; cursor: pointer; }

    </style>
</head>
<body>

<header>
    <div class="logo-text">MOVINET<span>CONDE</span></div>
</header>

<nav>
    <button onclick="nav('buscador')" class="active" id="btn-buscador">üî• OFERTAS 2026</button>
    <button onclick="nav('moviles')" id="btn-moviles">üì± M√ìVILES</button>
    <button onclick="nav('webs')" id="btn-webs">üåê WEBS</button>
    <button onclick="nav('admin')" id="btn-admin">üîí ADMIN</button>
</nav>

<main>

    <div id="buscador" class="section active">
        <div class="card">
            <h2>Calcula tu Pack Ideal</h2>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <div>
                    <label>¬øCu√°ntas l√≠neas necesitas?</label>
                    <input type="number" id="searchLineas" placeholder="Ej: 2" min="0">
                </div>
                <div>
                    <label>Presupuesto M√°ximo (‚Ç¨)</label>
                    <input type="number" id="searchPresupuesto" placeholder="Ej: 50">
                </div>
            </div>
            <button class="btn-action" onclick="buscarOfertas()">üîç BUSCAR OFERTAS</button>
        </div>
        
        <h3 id="resTitle" style="display:none">Resultados encontrados:</h3>
        <div id="resultadosPacks"></div>
    </div>

    <div id="moviles" class="section">
        <h2>Cat√°logo de M√≥viles</h2>
        <div class="card" style="display:flex; align-items:center; gap:10px;">
            <input type="number" id="movilPresupuesto" placeholder="Presupuesto M√°x (‚Ç¨)" oninput="renderMoviles()" style="margin:0;">
        </div>
        <div class="movil-grid" id="movilListDisplay"></div>
    </div>

    <div id="webs" class="section">
        <h2>Dise√±os Web Disponibles</h2>
        <div id="webListDisplay" class="movil-grid"></div>
    </div>

    <div id="admin" class="section">
        <div id="adminLogin" style="text-align: center; margin-top: 50px;">
            <h3>Acceso Propietario</h3>
            <input type="password" id="adminPass" placeholder="Clave de acceso" style="max-width: 200px; text-align: center;">
            <br><br>
            <button class="btn-action" style="max-width: 200px;" onclick="checkAdmin()">ENTRAR</button>
        </div>

        <div id="adminPanel" style="display: none;">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                <h2 style="margin:0;">Panel de Control</h2>
                <button onclick="logout()" style="background:#333; color:white; border:none; padding:8px 15px; border-radius:5px; cursor:pointer;">Salir</button>
            </div>

            <div class="card">
                <h3>‚ûï CREAR NUEVO PACK / OFERTA</h3>
                
                <label>Compa√±√≠a</label>
                <input type="text" id="addPackCompany" placeholder="Ej: Orange, Digi, Movistar...">
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap:10px;">
                    <div>
                        <label>Fibra Principal</label>
                        <input type="text" id="addPackFibra" placeholder="Ej: 600Mb">
                    </div>
                    <div>
                        <label>L√≠neas M√≥viles</label>
                        <input type="number" id="addPackLineas" placeholder="N¬∫ de l√≠neas">
                    </div>
                </div>

                <label>Datos del M√≥vil (GB)</label>
                <input type="text" id="addPackGB" placeholder="Ej: Ilimitados o 50GB">

                <label>Fibra Adicional (Opcional)</label>
                <input type="text" id="addPackFibraAdi" placeholder="Ej: No, o '2¬™ Residencia incluida'">

                <label>Plataformas de TV Incluidas:</label>
                <div class="checkbox-group">
                    <div class="checkbox-item"><input type="checkbox" id="tvOrange" value="Orange TV"><label for="tvOrange">Orange TV</label></div>
                    <div class="checkbox-item"><input type="checkbox" id="tvMovistar" value="Movistar+"><label for="tvMovistar">Movistar+</label></div>
                    <div class="checkbox-item"><input type="checkbox" id="tvNetflix" value="Netflix"><label for="tvNetflix">Netflix</label></div>
                    <div class="checkbox-item"><input type="checkbox" id="tvPrime" value="Prime Video"><label for="tvPrime">Prime Video</label></div>
                    <div class="checkbox-item"><input type="checkbox" id="tvHbo" value="HBO Max"><label for="tvHbo">HBO Max</label></div>
                    <div class="checkbox-item"><input type="checkbox" id="tvFutbol" value="Todo el F√∫tbol"><label for="tvFutbol">F√∫tbol</label></div>
                    <div class="checkbox-item"><input type="checkbox" id="tvDazn" value="DAZN"><label for="tvDazn">DAZN</label></div>
                    <div class="checkbox-item"><input type="checkbox" id="tvDisney" value="Disney+"><label for="tvDisney">Disney+</label></div>
                </div>

                <label>Precio Final (‚Ç¨/mes)</label>
                <input type="number" id="addPackPrice" placeholder="0.00">
                
                <button class="btn-action" onclick="addNewPack()">GUARDAR OFERTA</button>
                
                <div style="margin-top:20px; border-top:1px solid #333; paddingTop:10px;">
                    <h4>Ofertas Activas:</h4>
                    <div id="adminPackList"></div>
                </div>
            </div>

            <div class="card">
                <h3>‚ûï A√ëADIR M√ìVIL</h3>
                <input type="text" id="addMovilModel" placeholder="Modelo (Ej: Samsung S24)">
                <input type="number" id="addMovilPrice" placeholder="Precio (‚Ç¨)">
                <input type="text" id="addMovilImg" placeholder="Pegar URL de la imagen aqu√≠">
                <button class="btn-action" onclick="addNewMovil()">GUARDAR M√ìVIL</button>
                <div id="adminMovilList"></div>
            </div>

            <button onclick="factoryReset()" style="background:#ff4444; color:white; width:100%; padding:15px; border:none; margin-top:20px; border-radius:8px; font-weight:bold;">‚ö†Ô∏è BORRAR TODO Y RESTAURAR</button>
        </div>
    </div>

</main>

<div id="modalWhatsapp" class="modal-overlay">
    <div class="modal-content">
        <h3 style="color:var(--primary)">¬°Ya casi es tuyo!</h3>
        <p>Introduce tu nombre para gestionar el pedido por WhatsApp:</p>
        <input type="text" id="clientName" placeholder="Tu Nombre Completo" autofocus>
        <button class="btn-action" style="background: var(--accent); color: white;" onclick="sendWhatsapp()">ENVIAR PEDIDO üü¢</button>
        <button onclick="closeModal()" style="background:transparent; color:#888; border:none; margin-top:15px; cursor:pointer;">Cancelar</button>
    </div>
</div>

<div id="modalWeb" class="modal-overlay" style="flex-direction: column;">
    <button onclick="document.getElementById('modalWeb').style.display='none'" style="background:red; color:white; padding:15px; width:100%; border:none; font-weight:bold; cursor:pointer;">CERRAR VISTA PREVIA ‚úï</button>
    <iframe id="iframeContainer" src="" style="width:100%; height:90vh; border:none; background:white;"></iframe>
</div>

<script>
    // --- BASE DE DATOS INICIAL (CON TUS OFERTAS DE LAS FOTOS) ---
    const defaultData = {
        packs: [
            { 
                id: 1, 
                company: "Orange", 
                fibra: "600Mb", 
                gb: "Ilimitados", 
                lineas: 2, 
                fibraAdi: "", 
                tvs: ["Prime Video", "HBO Max"], 
                precio: 34.95 
            },
            { 
                id: 2, 
                company: "Orange 2026", 
                fibra: "Incluida", 
                gb: "Ilimitados", 
                lineas: 4, 
                fibraAdi: "", 
                tvs: ["Todo el F√∫tbol", "Orange TV", "SkyShowtime", "Netflix", "Disney+"], 
                precio: 75.00 
            },
            { 
                id: 3, 
                company: "Solo Fibra", 
                fibra: "600Mb", 
                gb: "Sin m√≥vil", 
                lineas: 0, 
                fibraAdi: "", 
                tvs: [], 
                precio: 15.00 
            }
        ],
        moviles: [
            { id: 1, model: "Samsung A54 5G", price: 340, img: "https://images.samsung.com/is/image/samsung/p6pim/es/sm-a546bzkceub/gallery/es-galaxy-a54-5g-sm-a546-sm-a546bzkceub-535942363?$684_547_PNG$" },
            { id: 2, model: "iPhone 15", price: 850, img: "https://store.storeimages.cdn-apple.com/4668/as-images.apple.com/is/iphone-15-black-select-202309?wid=5120&hei=2880&fmt=p-jpg&qlt=80&.v=1692926637018" }
        ],
        webs: [
            { id: 1, name: "Web Corporativa", url: "https://www.example.com" }
        ]
    };

    let db = JSON.parse(localStorage.getItem('movinetDB_v4')) || defaultData;
    let currentSelection = {};

    // --- NAVEGACI√ìN ---
    function nav(id) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
        document.getElementById('btn-'+id).classList.add('active');
        if(id === 'buscador') buscarOfertas(); // Refrescar
    }

    // --- BUSCADOR PACKS ---
    function buscarOfertas() {
        // Obtenemos valores. Si est√°n vac√≠os, ponemos valores por defecto permisivos
        let lineasIn = document.getElementById('searchLineas').value;
        let lineas = lineasIn === "" ? -1 : parseInt(lineasIn); // -1 significa "muestramelo todo"
        
        let presuIn = document.getElementById('searchPresupuesto').value;
        let presu = presuIn === "" ? 9999 : parseFloat(presuIn);

        const container = document.getElementById('resultadosPacks');
        container.innerHTML = '';
        document.getElementById('resTitle').style.display = 'block';

        // Filtro
        const results = db.packs.filter(p => {
            // Si el usuario no pone lineas, mostramos todo. Si pone, debe coincidir o tener m√°s.
            const lineasOk = lineas === -1 || p.lineas >= lineas; 
            const precioOk = p.precio <= (presu + 5); // 5‚Ç¨ de margen
            return lineasOk && precioOk;
        }).sort((a,b) => a.precio - b.precio);

        if(results.length === 0) {
            container.innerHTML = '<p style="text-align:center; color:#888;">No hay ofertas exactas. Prueba a subir el presupuesto o bajar las l√≠neas.</p>';
            return;
        }

        results.forEach(p => {
            // Generar etiquetas de TV
            let tvHtml = '';
            if(p.tvs && p.tvs.length > 0) {
                p.tvs.forEach(tv => {
                    tvHtml += `<span class="tv-tag">${tv}</span>`;
                });
            } else {
                tvHtml = '<span class="tv-tag" style="background:#222; color:#555;">Sin TV</span>';
            }

            // Etiqueta Fibra Adicional
            let fibAdiHtml = '';
            if(p.fibraAdi && p.fibraAdi.length > 2) {
                fibAdiHtml = `<div class="feature-badge" style="border-color:var(--secondary)">üè† + ${p.fibraAdi}</div>`;
            }

            container.innerHTML += `
                <div class="pack-result animated">
                    <div class="pack-header">
                        <div class="company-name">${p.company}</div>
                        <div class="price-big">${p.precio}‚Ç¨</div>
                    </div>
                    
                    <div class="pack-features">
                        <div class="feature-badge">üöÄ ${p.fibra}</div>
                        <div class="feature-badge">üì± ${p.lineas} L√≠neas</div>
                        <div class="feature-badge">üì° ${p.gb}</div>
                        ${fibAdiHtml}
                    </div>

                    <div style="margin-bottom:10px;">
                        <small style="color:#888;">Entretenimiento incluido:</small>
                        <div class="tv-grid">
                            ${tvHtml}
                        </div>
                    </div>

                    <div class="pack-footer">
                        <span class="price-sub">IVA Incluido</span>
                        <button class="btn-whatsapp" onclick="initOrder('Oferta Pack', '${p.company} (${p.lineas} l√≠neas)', ${p.precio})">
                            LO QUIERO ‚ûú
                        </button>
                    </div>
                </div>`;
        });
    }

    // --- M√ìVILES ---
    function renderMoviles() {
        const max = parseFloat(document.getElementById('movilPresupuesto').value) || 9999;
        const c = document.getElementById('movilListDisplay');
        c.innerHTML = '';
        db.moviles.filter(m => m.price <= max).forEach(m => {
            const img = m.img ? m.img : 'https://via.placeholder.com/150';
            c.innerHTML += `
                <div class="movil-card">
                    <div class="movil-img-container"><img src="${img}" loading="lazy"></div>
                    <div class="movil-info">
                        <strong>${m.model}</strong>
                        <div class="movil-price">${m.price}‚Ç¨</div>
                        <button class="btn-action" style="font-size:0.9rem; padding:10px;" onclick="initOrder('M√≥vil', '${m.model}', ${m.price})">COMPRAR</button>
                    </div>
                </div>`;
        });
    }

    // --- ADMIN FUNCIONES ---
    function checkAdmin() {
        if(document.getElementById('adminPass').value === '4354') {
            document.getElementById('adminLogin').style.display='none';
            document.getElementById('adminPanel').style.display='block';
            renderAdminLists();
        } else { alert('Clave incorrecta'); }
    }
    
    function logout() { location.reload(); }

    function addNewPack() {
        // Recoger Checkboxes de TV
        let selectedTVs = [];
        document.querySelectorAll('.checkbox-group input[type="checkbox"]:checked').forEach(chk => {
            selectedTVs.push(chk.value);
        });

        const p = {
            id: Date.now(),
            company: document.getElementById('addPackCompany').value,
            fibra: document.getElementById('addPackFibra').value,
            gb: document.getElementById('addPackGB').value,
            lineas: parseInt(document.getElementById('addPackLineas').value) || 0,
            fibraAdi: document.getElementById('addPackFibraAdi').value,
            tvs: selectedTVs,
            precio: parseFloat(document.getElementById('addPackPrice').value)
        };

        if(p.company && p.precio) {
            db.packs.push(p);
            localStorage.setItem('movinetDB_v4', JSON.stringify(db));
            alert('Oferta guardada correctamente');
            renderAdminLists();
            // Limpiar formulario b√°sico
            document.getElementById('addPackCompany').value = '';
            document.getElementById('addPackPrice').value = '';
        } else {
            alert('Rellena al menos la Compa√±√≠a y el Precio');
        }
    }

    function addNewMovil() {
        const m = {
            id: Date.now(),
            model: document.getElementById('addMovilModel').value,
            price: parseFloat(document.getElementById('addMovilPrice').value),
            img: document.getElementById('addMovilImg').value
        };
        if(m.model && m.price) {
            db.moviles.push(m);
            localStorage.setItem('movinetDB_v4', JSON.stringify(db));
            alert('M√≥vil a√±adido');
            renderAdminLists();
            document.getElementById('addMovilModel').value = '';
        }
    }

    function deleteItem(type, id) {
        if(confirm('¬øBorrar elemento?')) {
            db[type] = db[type].filter(i => i.id !== id);
            localStorage.setItem('movinetDB_v4', JSON.stringify(db));
            renderAdminLists();
        }
    }

    function renderAdminLists() {
        const render = (id, list, type, labelFn) => {
            const el = document.getElementById(id);
            el.innerHTML = '';
            list.forEach(item => {
                el.innerHTML += `
                    <div class="admin-list-item">
                        <span>${labelFn(item)}</span>
                        <button class="btn-delete" onclick="deleteItem('${type}', ${item.id})">üóëÔ∏è</button>
                    </div>`;
            });
        };
        render('adminPackList', db.packs, 'packs', p => `<b>${p.company}</b> - ${p.precio}‚Ç¨ (${p.lineas} lin)`);
        render('adminMovilList', db.moviles, 'moviles', m => `${m.model} (${m.price}‚Ç¨)`);
    }

    function factoryReset() {
        if(confirm('¬°ATENCI√ìN! Se borrar√°n todos los datos y volver√°n a salir los de ejemplo. ¬øSeguro?')) {
            localStorage.removeItem('movinetDB_v4');
            location.reload();
        }
    }

    // --- WHATSAPP ---
    function initOrder(type, desc, price) {
        currentSelection = { type, desc, price };
        document.getElementById('modalWhatsapp').style.display = 'flex';
        document.getElementById('clientName').value = '';
        document.getElementById('clientName').focus();
    }

    function closeModal() { document.getElementById('modalWhatsapp').style.display = 'none'; }

    function sendWhatsapp() {
        const name = document.getElementById('clientName').value;
        if(!name) return alert("Por favor, escribe tu nombre.");
        
        const phone = "34613509309";
        const msg = `üëã Hola, soy *${name}*.\n\nEstoy interesado en:\nüì¶ *${currentSelection.type}*\nüìù ${currentSelection.desc}\nüí∞ Precio: ${currentSelection.price}‚Ç¨/mes\n\n¬øPodemos tramitarlo?`;
        
        window.open(`https://wa.me/${phone}?text=${encodeURIComponent(msg)}`, '_blank');
        closeModal();
    }

    // --- INICIO ---
    window.onload = function() {
        buscarOfertas(); // Cargar ofertas al inicio
        renderMoviles();
    };

</script>
</body>
</html>